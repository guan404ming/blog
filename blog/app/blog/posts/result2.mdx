
---
title: 'Github Weekly Digest 8/5 - 8/11'
publishedAt: '2024-08-12'
---

## 📌 GoodbyeDPI - 深度封包檢測繞過工具

#### 簡介

GoodbyeDPI 是一款用於繞過許多網際網路服務供應商 (ISP) 深度封包檢測 (DPI) 系統的軟體，這些系統會封鎖對特定網站的訪問。它可以處理使用光纖分路器或端口鏡像 (被動 DPI) 連接的 DPI，這些 DPI 不會封鎖任何數據，但會比請求的目標更快地回復，以及依序連接的活動 DPI。

#### 主要功能

* 繞過被動 DPI 和活動 DPI。
* 使用各種技術來欺騙 DPI 系統，例如 TCP 分割、HTTP 標頭修改和偽造 HTTP/HTTPS 數據包。
* 支援自定義配置，例如封鎖特定端口、重新導向 DNS 請求以及自定義封包分割設定。
* 提供預設的模式集，方便快速開始使用。
* 可選的 Windows 服務安裝。

#### 如何使用

1. 從 Releases 頁面下載最新版本。
2. 解壓縮檔案並運行 1_russia_blacklist_dnsredir.cmd 或 2_any_country_dnsredir.cmd 腳本，分別適用於俄羅斯和其他國家。
3. 這些腳本會啟動 GoodbyeDPI，並將 DNS 解析器重新導向到 Yandex DNS 的非標準端口，以防止 DNS 污染。
4. 如果有效，恭喜！您可以直接使用它，也可以進行進一步的配置。

**更多選項：**

* `-p`：封鎖被動 DPI。
* `-q`：封鎖 QUIC/HTTP3。
* `-r`：將 Host 標頭替換為 hoSt。
* `-s`：移除 Host 標頭及其值之間的空格。
* `-m`：混合 Host 標頭值的大小寫。
* `-f <value>`：設定 HTTP 分割值。
* `-k <value>`：啟用 HTTP 持續 (keep-alive) 分割並設定其值。
* `-n`：當 `-k` 啟用時，不等待第一個區段 ACK。
* `-e <value>`：設定 HTTPS 分割值。
* `-a`：在方法和請求 URI 之間新增額外的空格 (啟用 `-s`，可能會中斷網站)。
* `-w`：嘗試在所有處理的端口上查找和解析 HTTP 流量（不只是端口 80）。
* `--port <value>`：額外的 TCP 端口，用於執行分割（以及 `-w` 的 HTTP 技巧）。
* `--ip-id <value>`：處理額外的 IP ID (十進制，捨棄具有此 ID 的重新導向和 TCP RST)。 此選項可以多次提供。
* `--dns-addr <value>`：將 UDP DNS 請求重新導向到提供的 IP 地址 (實驗性)。
* `--dns-port <value>`：將 UDP DNS 請求重新導向到提供的端口 (預設為 53)。
* `--dnsv6-addr <value>`：將 UDPv6 DNS 請求重新導向到提供的 IPv6 地址 (實驗性)。
* `--dnsv6-port <value>`：將 UDPv6 DNS 請求重新導向到提供的端口 (預設為 53)。
* `--dns-verb`：輸出詳細的 DNS 重新導向訊息。
* `--blacklist <txtfile>`：僅對提供的文本文件 (HTTP Host/TLS SNI) 中的主機名和子域執行繞過技巧。 此選項可以多次提供。
* `--allow-no-sni`：如果啟用 `--blacklist`，則無法偵測到 TLS SNI 時執行繞過。
* `--frag-by-sni`：如果在 TLS 數據包中偵測到 SNI，則在 SNI 值之前分割數據包。
* `--set-ttl <value>`：啟用虛假請求模式，並使用提供的 TTL 值發送。 危險！可能會以意想不到的方式中斷網站。 謹慎使用（或使用 `--blacklist`）。
* `--auto-ttl [a1-a2-m]`：啟用虛假請求模式，自動偵測 TTL 並根據距離減少它。 如果距離短於 a2，則將 TTL 減少 a2。 如果距離更長，則使用 (a1; a2) 比例，將距離作為權重。 如果產生的 TTL 超過 m(ax)，則將其設定為 m。 預設 (如果設定)：`--auto-ttl 1-4-10`。 也設定 `--min-ttl 3`。 危險！可能會以意想不到的方式中斷網站。 謹慎使用（或使用 `--blacklist`）。
* `--min-ttl <value>`：`--set-ttl` 和 `--auto-ttl` 模式下發送虛假請求的最小 TTL 距離 (128/64 - TTL)。
* `--wrong-chksum`：啟用虛假請求模式，並使用不正確的 TCP 校驗和發送。 可能無法在虛擬機器或某些路由器中使用，但比 `set-ttl` 更安全。
* `--wrong-seq`：啟用虛假請求模式，並使用過去的 TCP SEQ/ACK 發送。
* `--native-frag`：通過以更小的數據包發送它們來分割 (拆分) 數據包，而不會縮小窗口大小。 工作更快 (不會減慢連接速度) 而且更好。
* `--reverse-frag`：與 `--native-frag` 一樣分割 (拆分) 數據包，但以相反的順序發送。 可以處理無法處理分段 HTTPS TLS ClientHello 的網站 (因為它們接收“組合”的 TCP 流)。
* `--max-payload [value]`：TCP 負載數據超過 [value] 的數據包將不會被處理。 使用此選項通過跳過已建立會話中的大量數據 (例如文件傳輸) 來減少 CPU 使用率。 可能會跳過一些大型 HTTP 請求的處理。 預設 (如果設定)：`--max-payload 1200`。

**遺留模式集：**

* `-1`：`-p -r -s -f 2 -k 2 -n -e 2` (最兼容模式)
* `-2`：`-p -r -s -f 2 -k 2 -n -e 40` (HTTPS 速度更快，但仍兼容)
* `-3`：`-p -r -s -e 40` (HTTP 和 HTTPS 速度更快)
* `-4`：`-p -r -s` (最快速度)

**現代模式集 (更穩定、更兼容、更快)：**

* `-5`：`-f 2 -e 2 --auto-ttl --reverse-frag --max-payload`
* `-6`：`-f 2 -e 2 --wrong-seq --reverse-frag --max-payload`
* `-7`：`-f 2 -e 2 --wrong-chksum --reverse-frag --max-payload`
* `-8`：`-f 2 -e 2 --wrong-seq --wrong-chksum --reverse-frag --max-payload`
* `-9`：`-f 2 -e 2 --wrong-seq --wrong-chksum --reverse-frag --max-payload -q` (這是預設值)

**注意：**`--wrong-seq` 和 `--wrong-chksum` 的組合會生成兩個不同的虛假數據包。

**檢查 ISP 的 DPI 是否可以繞過：**

1. 確保您的提供商不會通過在瀏覽器中啟用“安全 DNS (DNS over HTTPS)”選項來污染 DNS 響應。
    * Chrome：設定 → 隱私權和安全 → 使用安全 DNS → 使用：NextDNS
    * Firefox：設定 → 網絡設定 → 啟用 DNS over HTTPS → 使用提供者：NextDNS
2. 运行 `goodbyedpi.exe` 可執行文件，不带任何选项。 如果有效，恭喜！您可以直接使用它，也可以进行进一步的配置，例如，如果已知并可用于您所在国家/地区的被阻止网站列表，则可以使用 `--blacklist` 选项。
3. 如果您的提供商拦截 DNS 请求，您可能需要使用 `--dns-addr` 选项指向在非标准端口上运行的公共 DNS 解析器 (例如 Yandex DNS 77.88.8.8:1253) 或使用第三方应用程序配置 DNS over HTTPS/TLS。
4. 检查 .cmd 脚本来进行修改，使其适合您的偏好和网络环境。

**工作原理：**

* **被動 DPI**
    * 大多数被動 DPI 会发送 HTTP 302 重定向，如果您尝试通过 HTTP 访问被阻止的网站，则会在 HTTPS 的情况下发送 TCP 重置，速度比目标网站更快。 由 DPI 发送的数据包通常具有 IP 标识字段等于 0x0000 或 0x0001，如俄罗斯提供商所见。 如果这些数据包将您重定向到另一个网站（审查页面），则会由 GoodbyeDPI 阻止。
* **活動 DPI**
    * 活動 DPI 更难欺骗。 目前，该软件使用 7 种方法来绕過活動 DPI：
        * 第一个数据包的 TCP 级分割
        * 持久 (keep-alive) HTTP 会话的 TCP 级分割
        * 将 Host 标头替换为 hoSt
        * 从 Host 标头中删除标头名称和值之间的空格
        * 在 HTTP 方法 (GET、POST 等) 和 URI 之间添加额外的空格
        * 混合 Host 标头值的大小写
        * 发送具有较低的生存时间 (TTL) 值、不正确的校验和或不正确的 TCP 序列/确认号的伪造 HTTP/HTTPS 数据包，以欺骗 DPI 并防止将它们传递到目标

    * 这些方法不应破坏任何网站，因为它们完全兼容 TCP 和 HTTP 标准，但足以防止 DPI 数据分类并绕過审查。 额外的空格可能会破坏某些网站，尽管它被 HTTP/1.1 规范接受 (参见 19.3 Tolerant Applications)。
* **WinDivert**
    * 该程序加载 WinDivert 驱动程序，该驱动程序使用 Windows 筛选平台来设置筛选器并将数据包重定向到用户空间。 它在控制台窗口可见时运行，并在您关闭窗口时终止。

**从源代码构建：**

* 本项目可以使用 GNU Make 和 mingw 构建。 唯一依赖的是 WinDivert。
* 构建 x86 exe 运行：
    ```
    make CPREFIX=i686-w64-mingw32- WINDIVERTHEADERS=/path/to/windivert/include WINDIVERTLIBS=/path/to/windivert/x86
    ```
* 构建 x86_64 运行：
    ```
    make CPREFIX=x86_64-w64-mingw32- BIT64=1 WINDIVERTHEADERS=/path/to/windivert/include WINDIVERTLIBS=/path/to/windivert/amd64
    ```

**安装为 Windows 服务：**

* 检查 service_install_russia_blacklist.cmd、service_install_russia_blacklist_dnsredir.cmd 和 service_remove.cmd 腳本中的示例。
* 根据自己的需要进行修改。

**已知问题：**

* 非常过时的 Windows 7 安装无法加载 WinDivert 驱动程序，因为缺少对 SHA256 数字签名的支持。 安装 KB3033929 x86/x64，或者更好，使用 Windows 更新更新整个系统。
* 一些 SSL/TLS 堆栈无法处理分段的 ClientHello 数据包，并且 HTTPS 网站将无法打开。 Bug: #4, #64. 分割问题已在 v0.1.7 中修复。
* ESET 防病毒与 WinDivert 驱动程序不兼容 #91。 这很可能是防病毒软件的错误，而不是 WinDivert。

**类似项目：**

* zapret by @bol-van (for MacOS, Linux and Windows)
* Green Tunnel by @SadeghHayeri (for MacOS, Linux and Windows)
* DPI Tunnel CLI by @zhenyolka (for Linux and routers)
* DPI Tunnel for Android by @zhenyolka (for Android)
* PowerTunnel by @krlvm (for Windows, MacOS and Linux)
* PowerTunnel for Android by @krlvm (for Android)
* SpoofDPI by @xvzc (for macOS and Linux)
* GhosTCP by @macronut (for Windows)
* ByeDPI for Linux/Windows + ByeDPIAndroid for Android (no root)

**致谢：**

* 感谢 @basil00 提供了 WinDivert。 这是该程序的主要部分。
* 感谢所有 BlockCheck 贡献者。 没有这个工具，就不可能理解 DPI 的行为。
## 📌 SpoofDPI: 繞過深層封包檢查的工具

#### 簡介

SpoofDPI 是一款簡單、快速的軟體，專為繞過深層封包檢查（Deep Packet Inspection，DPI）而設計。它透過修改 Client Hello 訊息，讓 DPI 难以识别目标网站，从而实现绕过封锁。

#### 主要功能

* 支持 Windows、macOS 和 Linux 操作系统。
* 提供命令行界面，方便使用。
* 可設定代理伺服器地址、端口、DNS 伺服器地址等参数。
* 允許自定義封包匹配規則，只對特定封包執行繞過 DPI 操作。
* 支持 DNS over HTTPS (DoH) 功能。

#### 如何使用

1. **安裝：**
    * 使用提供的安裝腳本（install.sh）進行安裝。
    * 使用 `go install` 命令安裝。
    * 或者使用 Git 克隆代码并手动构建。

2. **運行：**
    * 使用命令 `spoof-dpi [options...]` 運行 SpoofDPI。
    * 使用 `-h` 或 `--help` 选项查看所有可用选项。

3. **設定代理：**
    * 在 macOS 上，SpoofDPI 会自动设置代理。
    * 在 Linux 上，需要手动设置代理。
    * 在 Chrome 浏览器中，使用命令 `google-chrome --proxy-server="http://127.0.0.1:8080"` 设置代理。

4. **使用瀏覽器：**
    * 打开浏览器，访问目标网站。

**注意：**

* SpoofDPI 僅對 HTTPS 请求有效。
* 使用 SpoofDPI 可能會違反某些國家或地區的法律法规。请在使用前了解相关法律法规，并遵守当地法律。
* 在使用 SpoofDPI 时，建议关闭 Chrome 浏览器中其他 VPN 扩展程序。
## 📌 Teable: A No-Code Database Built on Postgres

#### 簡介

Teable 是一個基於 Postgres 的超高速、即時、專業、開發者友好的無代碼資料庫。它使用簡單的電子表格式介面來建立複雜的企業級資料庫應用程式。透過無代碼的方式解鎖高效的應用程式開發，免除資料安全和擴展性的障礙。

#### 主要功能

* **Spreadsheet-like Interface:** 提供電子表格式的介面，讓使用者可以直接在表格中編輯資料、輸入公式、排序和過濾資料，並使用聚合函數來分析資料。
* **Multiple Views:** 提供多種視圖，例如網格視圖、表格視圖、看板視圖、日曆視圖等，讓使用者可以以不同的方式查看和互動資料。
* **Super Fast:** 處理大量資料時速度極快，並支援批次資料操作。
* **Full-featured SQL Support:** 無縫整合 SQL 語法，讓使用者可以使用熟悉的工具或程式碼來存取資料。
* **Privacy-First:** 使用者擁有自己的資料，可以自訂資料存放位置。
* **Real-time Collaboration:** 支援即時協作，允許團隊成員同時編輯資料，並提供完整的權限管理機制。
* **Extensions (Coming Soon):** 提供擴展功能，讓使用者可以自訂應用程式並整合外部服務。
* **Automation (Coming Soon):** 支援自動化工作流程，讓使用者可以輕鬆地自動化資料處理。
* **Copilot (Coming Soon):** 整合 AI 功能，讓使用者可以使用自然語言指令來建立應用程式、分析資料、建立視圖和自動化操作。
* **Support for Multiple Databases (Coming Soon):** 支援多種資料庫，例如 Sqlite、PostgreSQL、MySQL、MariaDB、TiDB 等。

#### 如何使用

1. **Initialize:** 使用 `corepack enable` 啟用 Help Management Package Manager 並使用 `pnpm install` 安裝專案依賴。
2. **Select Database:** Teable 目前支援 SQLite 和 PostgreSQL，可以使用 `make switch-db-mode` 命令在兩種資料庫之間切換。
3. **Custom Environment Variables (Optional):** 可以自訂環境變數，例如在 `apps/nextjs-app` 目錄下複製 `.env.development` 文件並修改其內容。
4. **Run Dev Server:** 啟動後端應用程式，它將自動啟動前端應用程式，並支援自動重新載入功能。

Teable 的目標是提供一個易於使用、功能強大、且能滿足現代軟體開發需求的無代碼資料庫平台。
## 📌 Zapret v.60

#### 簡介

Zapret v.60 是一個獨立運作的 DPI 對抗工具，不依賴第三方伺服器。它可以協助繞過網站 http(s) 的封鎖或速度減慢、針對 TCP 和 UDP 協定的簽章分析，例如封鎖 VPN。

#### 主要功能

* **獨立運作：** 不依賴第三方伺服器，確保隱私和安全性。
* **DPI 對抗：** 針對不同 DPI 技術提供多種繞過策略，例如 TCP 分割、DNS 混淆等。
* **支援多種平台：** 支援傳統 Linux 系統、FreeBSD、OpenBSD、部分 MacOS，以及 OpenWrt 等嵌入式裝置。
* **多種模式：** 提供透明代理 (transparent proxy)、Socks 代理、NFQUEUE 等模式，滿足不同需求。
* **自動化功能：** 包含自動偵測封鎖網站、自動更新封鎖 IP 列表等功能，方便使用。

#### 如何使用

1. **選擇合適的模式：** 根據您的需求選擇透明代理、Socks 代理或 NFQUEUE 模式。
2. **設定參數：** 根據您的環境和 DPI 技術，設定 `config` 文件中的參數。
3. **安裝必要軟體：** 根據您的平台安裝必要的軟體，例如 iptables 或 nftables。
4. **啟動 Zapret：** 執行 `install_easy.sh` 安裝 Zapret，並啟動對應的腳本。
5. **測試繞過效果：** 訪問被封鎖的網站，測試 Zapret 是否能成功繞過 DPI。

Zapret v.60 提供了豐富的功能和彈性，可以根據您的需求進行調整，以達到最佳的繞過 DPI 效果。
## 📌 ComfyUI

#### 簡介

ComfyUI 是一款功能強大且模組化的 Stable Diffusion GUI 和後端，它提供一個圖表/節點/流程圖界面，讓你設計和執行複雜的 Stable Diffusion 管線，無需編寫任何程式碼。它支援 SD1.x、SD2.x、SDXL、Stable Video Diffusion、Stable Cascade、SD3 和 Stable Audio。

#### 主要功能

* **節點/圖表/流程圖界面:** 讓你輕鬆建立複雜的 Stable Diffusion 工作流程，無需編寫程式碼。
* **支援多種 Stable Diffusion 模型:** 包括 SD1.x、SD2.x、SDXL、Stable Video Diffusion、Stable Cascade、SD3 和 Stable Audio。
* **非同步佇列系統:** 讓你同時執行多個工作流程。
* **優化:** 只會重新執行工作流程中發生改變的部分。
* **智慧記憶體管理:** 可以自動在僅有 1GB VRAM 的 GPU 上執行模型。
* **支援 CPU 執行:** 即使沒有 GPU，也可以使用 `--cpu` 參數執行 (速度較慢)。
* **載入多種模型格式:** 包括 ckpt、safetensors 和 diffusers 模型/檢查點、獨立 VAE 和 CLIP 模型。
* **支援嵌入/文字反轉、Loras、超網路、載入完整工作流程、儲存/載入工作流程等功能。**

#### 如何使用

1. **安裝:** 可以下載獨立的 Windows 版本，或使用 Git 克隆儲存庫並手動安裝。
2. **放置模型:** 將你的 Stable Diffusion 檢查點、VAE 等模型放在對應的 ComfyUI 資料夾中。
3. **執行:** 執行 `python main.py` 命令啟動 ComfyUI。
4. **使用界面:** 使用節點和流程圖建立工作流程，並調整設定以獲得最佳結果。

**更多資訊:**

* **文件:** [https://www.comfy.org/](https://www.comfy.org/)
* **社群:** [https://www.comfy.org/](https://www.comfy.org/)
* **支援和開發頻道:** Matrix 空間: #comfyui_space:matrix.org
